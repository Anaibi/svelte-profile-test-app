<svelte:head>
	 <link href="https://fonts.googleapis.com/css?family=Palanquin:300" rel="stylesheet">
</svelte:head>

<div class="page sidenav">
	<SideNav menu={mainNav} brand={brand} user={user}/>
	<div class="scroll">
		<Banner banner={profile.banner}/>
		<div class="row">
			<Sidebar>
				<SidebarProfile profile={profile}/>
			</Sidebar>
			<main>
				<header class="row vCentered">
					<HeaderProfile profile={profile}/>
				</header>
				<div class="row">
					<div class="content">
						<ContentProfile menu={profileMenu} profile={profile}/>
					</div>
					<Sidebar>
						<SidebarContent/>
					</Sidebar>
				</div>
			</main>
		</div>
	</div>
</div>
<Users />

<style>
	:global(body) {
		padding: 0;
		margin: 0;
		font-family: 'Palanquin', sans-serif;
		color: #888888;
		background: #D0D5D9;
	}
	:global(*) {
		box-sizing: border-box;
	}
	:global(h1, h2, p) {
		margin: 0;
	}
	:global(a) {
		color: inherit;
		text-decoration: none;
	}
	:global(.img) {
		/* center alt text if no image */
		display: flex;
		align-items: center;
		justify-content: center;
		text-align: center;
		font-size: 12px;
		background: lightgray;
	}
	:global(button) {
		margin: 0;
		padding: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		color: #505050;
		background: linear-gradient(white, #F9F9F9);
		border: 1px solid #EBEBEB;
		box-shadow: 1px 1px 1px 1px EBEBEB;
		border-radius: 3px;
		font-weight: bold;
		text-transform: uppercase;
	}
	:global(button):hover {
		cursor: pointer;
	}
	:global(.link),
	:global(a.link) {
		color: #41B1E3;
		text-transform: none;
	}
	:global(.link:hover),
	:global(a.link:hover) {
		color: #3299CC;
		text-decoration: none;
	}
	:global(.row) {
		display: flex;
		justify-content: space-between;
	}
	:global(.row.vCentered) {
		align-items: center;
	}
	:global(.row-bottom) {
		align-items: flex-end;
	}
	:global(.scroll) {
		overflow: scroll;
		/* hide scrollbar */
		padding-right: 100%;
		margin-right: -100%;
	}
	:global(.highlight) {
		color: #3299CC;
	}
	:global(.italic) {
		font-style: italic;
	}
	:global(.box) {
		margin-top: 20px;
		border-radius: 10px;
		box-shadow: 0px 6px 12px 2px #F1F1F1;
		overflow: hidden;
	}
	:global(.box-2) {
		margin-top: 20px;
		border-radius: 10px;
		box-shadow: 0px 0px 15px 3px #F1F1F1;
		overflow: hidden;
	}
	.page {
		max-width: 1360px;
		margin: auto;
		border-radius: 5px;
		box-shadow: 0px 0px 50px 50px #DBDEE2;
		background: #FFFFFF;
	}
	.page.sidenav {
		display: flex;
		height: 100vh;
		overflow: hidden;
	}
	main {
		width: 100%;
	}
	header {
		height: 130px;
		padding: 30px 35px;
		border-bottom: 1px solid #F5F5F5;
	}
	.content {
		flex: 2;
	}
	.content + :global(.sidebar) {
		flex: 1;
	}
</style>
<script>
	import SideNav from './SideNav.html';
	import Banner from './Banner.html';
	import Sidebar from './Sidebar.html';
	import SidebarProfile from './SidebarProfile.html';
	import HeaderProfile from './HeaderProfile.html';
	import ContentProfile from './ContentProfile.html';
	import SidebarContent from './SidebarContent.html';
	import Users from './Users.html';

	const USER = {
		id: '01',
		img: ''
	};

	const POSTS = [
		{ date: '2018-05-09T12:00:00Z',
			content: {
				text: '<p>New portfolio update with my last projects <strong>#architecture</strong> <strong>#portfolio</strong> <a class="link" href="https://www.architizes.com/MarioMendez" target="_blank">https://www.architizes.com/MarioMendez</a></p>'
			},
			details: {
				stars: 2,
				comments: {
					total: 11,
					link: ''
				},
				answers: {
					total: 0,
					link: ''
				}
			}
		},
		{ isSponsored: true,
			date: '2018-05-06T13:00:00Z',
			content: {
				text: '<p class="title">Architecture Services</p><p>Design and planning consultance, see more at ...<p>',
				img: 'https://i.imgur.com/vZ8suUE.jpg'
			},
			details: {
				stars: 36,
				comments: {
					total: 2,
					link: ''
				},
				answers: {
					total: 5,
					link: ''
				}
			},
			recommendations: {
				users: [
					{id: '03', img: '', link: '', name: ''},
					{id: '04', img: '', link: '', name: ''},
					{id: '05', img: '', link: '', name: ''}
				],
				rating: 4.6,
				total: 42
			}
		},
		{	isReview: true,
			review: {
				user: {
					id: '03',
					name: 'Jessica Simmons',
					img: '',
					link: '',
				},
				date: '2018-05-03T13:00:00Z',
				content: {
					text: '<p>It was a pleasure to work with Mario. Very professional and talented architect. I really suggest him!'
				},
				rating: 4.8,
			},
			details: {
				stars: 6,
				comments: {
					total: 2,
					link: ''
				},
				answers: {
					total: 2,
					link: ''
				}
			}
		}
	];

	const REVIEWS = [];

	const PROFILE = {
		user: {
			id: '02',
			img: 'https://d3iw72m71ie81c.cloudfront.net/male-3.jpg',
			name: 'Mario Mendez',
			title: 'Senior Architect',
			link: ''
		},
		details: {
			rating: 4.8,
			followers: 320,
			following: 147,
			perf: 56,
			reviews: 42,
		},
		rating: 4.8,
		followers: 320,
		following: 147,
		perf: 56,
		reviews: 42,
		banner: {
			img: 'https://i.imgur.com/MbMnM74.jpg',
			width: 130,
			top: -60,
			left: 0
		},
		projects: [
			{img: 'https://i.imgur.com/vZ8suUE.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/kKvl97S.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/6fQwQdQ.png', title: 'title', link: ''},
			{img: 'https://i.imgur.com/6eA8rHj.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/HZVeVDs.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/3JueZBg.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/mucT2Sl.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/tA6OlVu.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/w1bEuVW.jpg', title: 'title', link: ''},
			{img: 'https://i.imgur.com/V2Mt6RJ.jpg', title: 'title', link: ''}
		],
		posts: POSTS,
		reviews: REVIEWS
	};

	const ICONS = [
					{name: 'search', color: '#42A5D2', svg: 'Search'},
					{name: 'edit', color: '#FDAA29', svg: 'Edit'},
					{name: 'messages', color: '#F26C4F', svg: 'Message'},
					{name: 'agenda', color: '#058E85', svg: 'Agenda', 'text': 'Agenda'},
					{name: 'info', svg: 'Clipboard', text: 'Info'},
					{name: 'feed', svg: 'Book', text: 'Feed'},
					{name: 'resume', svg: 'Clip', text: 'Résumé'},
				];

	export default {
		components: {
			SideNav,
			Banner,
			Sidebar,
			SidebarProfile,
			HeaderProfile,
			ContentProfile,
			SidebarContent,
			Users
		},
		data() {
			return {
				brand: {img: '', link: ''},
				icons: ICONS,
				mainNav: [
					{link: '', icon: 'search', active: true},
					{link: '', icon: 'edit'},
					{link: '', icon: 'messages'},
					{link: '', icon: 'agenda'}
				],
				user: USER,
				profile: PROFILE,
				profileMenu: [
					{link: 'ProfileInfo', icon: 'info'},
					{link: 'ProfileFeed', icon: 'feed', active: true},
					{link: 'ProfileAgenda', icon: 'agenda'},
					{link: 'ProfileResume', icon: 'resume'}
				],
			}
		},
		methods: {
			getIcons(menu) {
				var icons = this.get().icons;
				if (menu.length === 0) { return; }
				menu.forEach(item => {
					var found = icons.find(x => x.name === item.icon);
					if (found) item.icon = found;
					else item.icon = {name: item.icon}
				});
				return menu;
			}
		},
		oncreate() {
			this.set({mainNav: this.getIcons(this.get().mainNav)});
			this.set({profileMenu: this.getIcons(this.get().profileMenu)});
		}
	};
</script>
